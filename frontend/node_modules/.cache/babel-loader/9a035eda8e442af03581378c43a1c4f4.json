{"ast":null,"code":"import _regeneratorRuntime from\"D:\\\\Programa\\xE7\\xE3oB7Web\\\\Projetos\\\\olx-clone\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\Programa\\xE7\\xE3oB7Web\\\\Projetos\\\\olx-clone\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:\\\\Programa\\xE7\\xE3oB7Web\\\\Projetos\\\\olx-clone\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from'react';import{PageArea}from'./styled';import{PageContainer,PageTitle,ErrorMessage}from'../../components/MainComponents';import useApi from'../../helpers/MBSApi';import{useState,useEffect}from'react';import{doLogin}from'../../helpers/authHandler';// import { Link } from 'react-router-dom';\nvar Page=function Page(){var api=useApi();var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),stateLoc=_useState4[0],setStateLoc=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),confirmPassword=_useState10[0],setConfirmPassword=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),stateList=_useState12[0],setStateList=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),disabled=_useState14[0],setDisabled=_useState14[1];var _useState15=useState(''),_useState16=_slicedToArray(_useState15,2),error=_useState16[0],setError=_useState16[1];useEffect(function(){getStates();},[]);var getStates=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var slist;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.getStates();case 2:slist=_context.sent;setStateList(slist);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getStates(){return _ref.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var json;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setDisabled(true);setError('');if(!(password!==confirmPassword)){_context2.next=7;break;}setError('Senhas não batem');setDisabled(false);return _context2.abrupt(\"return\");case 7:_context2.next=9;return api.register(name,email,password,stateLoc);case 9:json=_context2.sent;if(json.error){setError(json.error);}else{doLogin(json.token);window.location.href='/';}setDisabled(false);case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(PageContainer,null,/*#__PURE__*/React.createElement(PageTitle,null,\"Cadastro\"),/*#__PURE__*/React.createElement(PageArea,null,error&&/*#__PURE__*/React.createElement(ErrorMessage,null,error),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"label\",{className:\"area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"area--title\"},\"Nome:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"area--input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",disabled:disabled,value:name,onChange:function onChange(e){return setName(e.target.value);},required:true}))),/*#__PURE__*/React.createElement(\"label\",{className:\"area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"area--title\"},\"Estado:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"area--input\"},/*#__PURE__*/React.createElement(\"select\",{value:stateLoc,onChange:function onChange(e){return setStateLoc(e.target.value);},required:true},/*#__PURE__*/React.createElement(\"option\",null),stateList.map(function(i,k){return/*#__PURE__*/React.createElement(\"option\",{key:k,value:i._id},i.name);})))),/*#__PURE__*/React.createElement(\"label\",{className:\"area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"area--title\"},\"E-mail:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"area--input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"email\",disabled:disabled,value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true}))),/*#__PURE__*/React.createElement(\"label\",{className:\"area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"area--title\"},\"Senha:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"area--input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",disabled:disabled,value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true}))),/*#__PURE__*/React.createElement(\"label\",{className:\"area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"area--title\"},\"Confirmar senha:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"area--input\"},/*#__PURE__*/React.createElement(\"input\",{type:\"password\",disabled:disabled,value:confirmPassword,onChange:function onChange(e){return setConfirmPassword(e.target.value);},required:true}))),/*#__PURE__*/React.createElement(\"label\",{className:\"area\"},/*#__PURE__*/React.createElement(\"div\",{className:\"area--title\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"area--input\"},/*#__PURE__*/React.createElement(\"button\",{disabled:disabled},\"Cadastrar\"))))));};export default Page;","map":{"version":3,"sources":["D:/ProgramaçãoB7Web/Projetos/olx-clone/frontend/src/pages/SignUp/index.js"],"names":["React","PageArea","PageContainer","PageTitle","ErrorMessage","useApi","useState","useEffect","doLogin","Page","api","name","setName","stateLoc","setStateLoc","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","stateList","setStateList","disabled","setDisabled","error","setError","getStates","slist","handleSubmit","e","preventDefault","register","json","token","window","location","href","target","value","map","i","k","_id"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { PageArea } from './styled';\r\nimport { PageContainer, PageTitle, ErrorMessage } from '../../components/MainComponents';\r\nimport useApi from '../../helpers/MBSApi';\r\nimport { useState, useEffect } from 'react';\r\nimport { doLogin } from '../../helpers/authHandler';\r\n\r\n// import { Link } from 'react-router-dom';\r\n\r\nconst Page = () => {\r\n\r\n    const api = useApi();\r\n\r\n    const [name, setName] = useState('');\r\n    const [stateLoc, setStateLoc] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [stateList, setStateList] = useState([]);\r\n\r\n    const [disabled, setDisabled] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    useEffect(() => {\r\n        getStates();\r\n    }, []);\r\n\r\n    const getStates = async () => {\r\n        const slist = await api.getStates();\r\n        setStateList(slist);\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setDisabled(true);\r\n        setError('');\r\n\r\n        if (password !== confirmPassword) {\r\n            setError('Senhas não batem');\r\n            setDisabled(false);\r\n            return;\r\n        }\r\n\r\n        const json = await api.register(name, email, password, stateLoc);\r\n\r\n        if (json.error) {\r\n            setError(json.error);\r\n        } else {\r\n            doLogin(json.token);\r\n            window.location.href = '/';\r\n        }\r\n\r\n        setDisabled(false);\r\n    }\r\n\r\n\r\n    return (\r\n        <PageContainer>\r\n            <PageTitle>\r\n                Cadastro\r\n            </PageTitle>\r\n            <PageArea>\r\n\r\n                {error &&\r\n                    <ErrorMessage>{error}</ErrorMessage>\r\n                }\r\n\r\n\r\n                <form onSubmit={handleSubmit}>\r\n                    <label className=\"area\">\r\n                        <div className=\"area--title\">\r\n                            Nome:\r\n                        </div>\r\n                        <div className=\"area--input\">\r\n                            <input\r\n                                type=\"text\"\r\n                                disabled={disabled}\r\n                                value={name}\r\n                                onChange={e => setName(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </label>\r\n                    <label className=\"area\">\r\n                        <div className=\"area--title\">\r\n                            Estado:\r\n                        </div>\r\n                        <div className=\"area--input\">\r\n                            <select value={stateLoc} onChange={e => setStateLoc(e.target.value)} required >\r\n                                <option></option>\r\n                                {stateList.map((i, k) =>\r\n                                    <option key={k} value={i._id}>{i.name}</option>\r\n                                )}\r\n                            </select>\r\n                        </div>\r\n                    </label>\r\n                    <label className=\"area\">\r\n                        <div className=\"area--title\">\r\n                            E-mail:\r\n                        </div>\r\n                        <div className=\"area--input\">\r\n                            <input\r\n                                type=\"email\"\r\n                                disabled={disabled}\r\n                                value={email}\r\n                                onChange={e => setEmail(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </label>\r\n                    <label className=\"area\">\r\n                        <div className=\"area--title\">\r\n                            Senha:\r\n                        </div>\r\n                        <div className=\"area--input\">\r\n                            <input\r\n                                type=\"password\"\r\n                                disabled={disabled}\r\n                                value={password}\r\n                                onChange={e => setPassword(e.target.value)}\r\n                                required\r\n\r\n                            />\r\n                        </div>\r\n                    </label>\r\n                    <label className=\"area\">\r\n                        <div className=\"area--title\">\r\n                            Confirmar senha:\r\n                        </div>\r\n                        <div className=\"area--input\">\r\n                            <input\r\n                                type=\"password\"\r\n                                disabled={disabled}\r\n                                value={confirmPassword}\r\n                                onChange={e => setConfirmPassword(e.target.value)}\r\n                                required\r\n                            />\r\n                        </div>\r\n                    </label>\r\n                    <label className=\"area\">\r\n                        <div className=\"area--title\">\r\n                        </div>\r\n                        <div className=\"area--input\">\r\n                            <button disabled={disabled} >Cadastrar</button>\r\n                        </div>\r\n                    </label>\r\n                </form>\r\n            </PageArea>\r\n        </PageContainer>\r\n    );\r\n}\r\n\r\nexport default Page;"]},"metadata":{},"sourceType":"module"}