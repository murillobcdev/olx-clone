{"ast":null,"code":"import Cookies from 'js-cookie';\nconst BASEAPI = 'http://alunos.b7web.com.br:501/';\n\nconst apiFetchPost = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n\n    if (token) {\n      body.token = token;\n    }\n  }\n\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await res.json();\n\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n\n  return json;\n};\n\nconst MBSApi = {\n  login: async (email, password) => {\n    const json = await apiFetchPost('/user/signin', {\n      email,\n      password\n    });\n    return json;\n  }\n};\nexport default (() => MBSApi);","map":{"version":3,"sources":["D:/ProgramaçãoB7Web/projetos/olx-clone/frontend/src/helpers/MBSApi.js"],"names":["Cookies","BASEAPI","apiFetchPost","endpoint","body","token","get","res","fetch","method","headers","JSON","stringify","json","notallowed","window","location","href","MBSApi","login","email","password"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AAEA,MAAMC,OAAO,GAAG,iCAAhB;;AAEA,MAAMC,YAAY,GAAG,OAAOC,QAAP,EAAiBC,IAAjB,KAA0B;AAE3C,MAAI,CAACA,IAAI,CAACC,KAAV,EAAiB;AACb,QAAIA,KAAK,GAAGL,OAAO,CAACM,GAAR,CAAY,OAAZ,CAAZ;;AACA,QAAID,KAAJ,EAAW;AACPD,MAAAA,IAAI,CAACC,KAAL,GAAaA,KAAb;AACH;AACJ;;AAED,QAAME,GAAG,GAAG,MAAMC,KAAK,CAACP,OAAO,GAAGE,QAAX,EAAqB;AACxCM,IAAAA,MAAM,EAAE,MADgC;AAExCC,IAAAA,OAAO,EAAE;AACL,gBAAU,kBADL;AAEL,sBAAgB;AAFX,KAF+B;AAMxCN,IAAAA,IAAI,EAAEO,IAAI,CAACC,SAAL,CAAeR,IAAf;AANkC,GAArB,CAAvB;AASA,QAAMS,IAAI,GAAG,MAAMN,GAAG,CAACM,IAAJ,EAAnB;;AACA,MAAIA,IAAI,CAACC,UAAT,EAAqB;AACjBC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,SAAvB;AACA;AACH;;AACD,SAAOJ,IAAP;AAEH,CAzBD;;AA2BA,MAAMK,MAAM,GAAG;AACXC,EAAAA,KAAK,EAAE,OAAOC,KAAP,EAAcC,QAAd,KAA2B;AAC9B,UAAMR,IAAI,GAAG,MAAMX,YAAY,CAC3B,cAD2B,EAE3B;AAAEkB,MAAAA,KAAF;AAASC,MAAAA;AAAT,KAF2B,CAA/B;AAIA,WAAOR,IAAP;AACH;AAPU,CAAf;AAUA,gBAAe,MAAMK,MAArB","sourcesContent":["import Cookies from 'js-cookie';\r\n\r\nconst BASEAPI = 'http://alunos.b7web.com.br:501/'\r\n\r\nconst apiFetchPost = async (endpoint, body) => {\r\n    \r\n    if (!body.token) {\r\n        let token = Cookies.get('token');\r\n        if (token) {\r\n            body.token = token;\r\n        }\r\n    }\r\n\r\n    const res = await fetch(BASEAPI + endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n            'Accept': 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(body)\r\n    });\r\n\r\n    const json = await res.json();\r\n    if (json.notallowed) {\r\n        window.location.href = '/signin';\r\n        return;\r\n    }\r\n    return json;\r\n\r\n}\r\n\r\nconst MBSApi = {\r\n    login: async (email, password) => {\r\n        const json = await apiFetchPost(\r\n            '/user/signin',\r\n            { email, password }\r\n        );\r\n        return json;\r\n    }\r\n}\r\n\r\nexport default () => MBSApi;"]},"metadata":{},"sourceType":"module"}